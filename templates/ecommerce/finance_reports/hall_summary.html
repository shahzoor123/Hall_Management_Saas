{% extends 'partials/base.html' %} {% load static %} {% block title%}Dashboard{% endblock title %} {% block extra_css %}
<!-- plugin css -->
<link href="{% static 'libs/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.css' %}" rel="stylesheet"
  type="text/css" />
<link href="{% static 'libs/chartist/dist/chartist.min.css' %}" rel="stylesheet" />
<link rel="stylesheet" href="{% static 'css/reports.css' %}" />


{% endblock extra_css %} {% block content %}
<div class="main-content">
  <div class="page-content">
    <!-- start page title -->
    <div class="page-title-box">
      <div class="container-fluid">
        <div class="row align-items-center">
          <div class="col-sm-6">
            <div class="page-title">
              <h4>Finance Dashboard</h4>
              <ol class="breadcrumb m-0">
                <li class="breadcrumb-item">
                  <a href="javascript: void(0);">Hall</a>
                </li>
                <li class="breadcrumb-item">
                  <a href="javascript: void(0);">Dashboard</a>
                </li>
                <li class="breadcrumb-item active">Home</li>
              </ol>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end page title -->
    <div class="container-fluid">
      <div class="page-content-wrapper">
        <div class="row">
          <div class="col-xl-8">
            <div class="card">
              <div class="card-body">
                <h4 class="header-title">Overlapping bars on mobile</h4>
                <p class="card-title-desc">
                  This example makes use of label interpolation and the
                  seriesBarDistance property that allows you to make bars
                  overlap over each other.
                </p>

                <!-- <div id="overlapping-bar" class="ct-chart ct-golden-section" dir="ltr"></div> -->

                <div style="width: 80%;">
                  <canvas id="salesChart"></canvas>
              </div>
              <div style="width: 80%;">
                  <canvas id="expensesChart"></canvas>
              </div>
              </div>
            </div>
          </div>
          <div class="col-xl-4">
            <div class="row">
              <div class="col-xl-6 col-md-6">
                <div class="card">
                  <div class="card-body">
                    <div class="text-center">
                      <p class="font-size-16">Events This Month</p>
                      <div class="mini-stat-icon mx-auto mb-4 mt-3">
                        <span class="avatar-title rounded-circle bg-soft-primary">
                          <i class="mdi mdi-calendar-month text-primary font-size-20"></i>
                        </span>
                      </div>
                      <h5 class="font-size-22"></h5>
                      <p class="text-muted">
                        {% if total_events_this_month %}
                        {{total_events_this_month}} Target
                        {% else %}
                        0 Target
                        {% endif %}

                      </p>
                      <div class="progress mt-3" style="height: 4px">
                        <div id="month-progressBar" class="progress-bar progress-bar bg-primary" role="progressbar"
                          style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="70"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xl-6 col-md-6">
                <div class="card">
                  <div class="card-body">
                    <div class="text-center">
                      <p class="font-size-16">Events This Year</p>
                      <div class="mini-stat-icon mx-auto mb-4 mt-3">
                        <span class="avatar-title rounded-circle bg-soft-success">
                          <i class="mdi mdi-finance text- font-size-20"></i>
                        </span>
                      </div>
                      <h5 class="font-size-22"></h5>
                      <p class="text-muted">
                        {% if total_events_this_year %}
                        {{total_events_this_year}} Target
                        {% else %}
                        0 Target
                        {% endif %}

                      </p>
                      <div class="progress mt-3" style="height: 4px">
                        <div id="yearly-progressBar" class="progress-bar progress-bar bg-success" role="progressbar"
                          aria-valuenow="{{total_events_this_year}}" aria-valuemin="0"
                          aria-valuemax="{{ total_events_this_year }}"></div>
                      </div>

                      <h1 hidden id="total_events_this_year" data-my-variable="{{total_events_this_year}}"></h1>

                      <h1 hidden id="total_events_this_month" data-my-variable="{{total_events_this_month}}"></h1>

                      <script>
                        // Get the total_events_this_year value from the hidden element or another source
                        var totalEventsThisYear = parseInt(
                          document
                            .getElementById("total_events_this_year")
                            .getAttribute("data-my-variable")
                        );

                        var total_events_this_month = parseInt(
                          document
                            .getElementById("total_events_this_month")
                            .getAttribute("data-my-variable")
                        );

                        // Calculate the percentage
                        var yearly_percentage = totalEventsThisYear;
                        var montly_percentage = totalEventsThisYear;
                        // Set the style attribute of the progress bar
                        document.getElementById(
                          "yearly-progressBar"
                        ).style.width = yearly_percentage + "%";
                        document.getElementById(
                          "month-progressBar"
                        ).style.width = montly_percentage + "%";
                      </script>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-body">
                <h4 class="header-title mb-4">Expense Stastics</h4>
                <div class="media">
                  <h4>&#8360; 14,235</h4>
                  <div class="media-body ps-3">
                    <div class="dropdown">
                      <button class="btn btn-light btn-sm dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Today<i class="mdi mdi-chevron-down ms-1"></i>
                      </button>
                      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">Yesterday</a>
                        <a class="dropdown-item" href="#">Last Week</a>
                        <a class="dropdown-item" href="#">Last Month</a>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="mt-3">
                  <div id="stastics-charts"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <h4 class="header-title">Overlapping bars on mobile</h4>
            <p class="card-title-desc">
              This example makes use of label interpolation and the
              seriesBarDistance property that allows you to make bars overlap
              over each other.
            </p>

            <div id="overlapping-bars" class="ct-chart ct-golden-section" dir="ltr"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- container-fluid -->
  </div>
</div>

<h1 hidden id="sale" data-my-variable="{{sale}}"></h1>
<h1 hidden id="expense" data-my-variable="{{expense}}"></h1>
<!-- End Page-content -->
{% endblock content %} {% block extra_javascript %}


<!-- apexcharts -->
<script src="{% static 'libs/apexcharts/dist/apexcharts.min.js' %}"></script>
<!-- Plugins js-->
<script src="{% static 'libs/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.min.js' %}"></script>
<script src="{% static 'libs/admin-resources/jquery.vectormap/maps/jquery-jvectormap-world-mill-en.js' %}"></script>

<!-- <script src="{% static 'js/pages/dashboard.init.js' %}"></script> -->
<script src="{% static 'libs/chart.js/dist/Chart.bundle.min.js' %}"></script>
<script src="{% static 'js/pages/chartjs.init.js' %}"></script>
<script src="{% static 'libs/chartist/dist/chartist.min.js' %}"></script>
<script src="{% static 'libs/chartist-plugin-tooltips-updated/dist/chartist-plugin-tooltip.min.js' %}"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- demo js-->
<!-- <script src="{% static 'js/pages/chartist.init.js' %}"></script> -->

<!-- Bar chart -->

<script>
  const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
  const salesData = Array.from({ length: 12 }, () => Math.floor(Math.random() * 1000));
  const expensesData = Array.from({ length: 12 }, () => Math.floor(Math.random() * 500));

  const salesChartCtx = document.getElementById('salesChart').getContext('2d');
  const expensesChartCtx = document.getElementById('expensesChart').getContext('2d');

  const salesChart = new Chart(salesChartCtx, {
      type: 'bar',
      data: {
          labels: months,
          datasets: [{
              label: 'Monthly Sales',
              data: salesData,
              backgroundColor: 'rgba(54, 162, 235, 0.6)',
          }],
      },
      options: {
          onClick: function (event, elements) {
              if (elements.length > 0) {
                  const selectedIndex = elements[0].index;
                  console.log(selectedIndex);
                  updateExpensesChart(selectedIndex);
              }
          }
      }
  });

  function updateExpensesChart(selectedIndex) {
      const updatedExpensesData = expensesData.map((value, index) => (index === selectedIndex ? value : 0));
      expensesChart.data.datasets[0].data = updatedExpensesData;
      expensesChart.update();
  }

  const expensesChart = new Chart(expensesChartCtx, {
      type: 'bar',
      data: {
          labels: months,
          datasets: [{
              label: 'Monthly Expenses',
              data: expensesData,
              backgroundColor: 'rgba(255, 99, 132, 0.6)',
          }],
      },
  });
</script>




<script>
  // // Get the values from the data attributes
  // var montly_sale = document
  //   .getElementById("sale")
  //   .getAttribute("data-my-variable");
  // var montly_expense = document
  //   .getElementById("expense")
  //   .getAttribute("data-my-variable");

  // // Parse the values as JSON arrays
  // var totalSales = JSON.parse(montly_sale);
  // var totalExpense = JSON.parse(montly_expense);

  (data = {
    labels: [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "Mai",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec",
    ],
    series: [


      [8, 6, 9, 6, 8, 6, 3, 6, 7, 10, 9, 7],
      [7, 5, 4, 5, 7, 3, 4, 5, 4, 6, 8, 5],
    ],
  }),
    (options = { seriesBarDistance: 1 }),
    (responsiveOptions = [
      [
        "screen and (max-width: 640px)",
        {
          seriesBarDistance: 1,
          axisX: {
            labelInterpolationFnc: function (e) {
              return e[0];
            },
          },
        },
      ],
    ]),
    new Chartist.Bar("#overlapping-bar", data, options, responsiveOptions);

    var monthChart = new Chartist.Bar("#overlapping-bar", data, options, responsiveOptions);

     // Add a click event listener to the month-wise chart
  monthChart.on("draw", function (data) {
    if (data.type === "bar") {
      data.element.attr({
        style: "cursor: pointer;",
      });
      data.element.off("click"); // Remove any previous click event handlers
      data.element.on("click", function () {
        var selectedMonth = months[data.index];
        var selectedSales = totalSales[data.index];
        var selectedExpense = totalExpense[data.index];

        // Create data for the day-wise chart
        var dayData = {
          labels: ["Day 1", "Day 2", "Day 3", /* Add all days here */],
          series: [selectedSales, selectedExpense],
        };

        // Render the day-wise chart
        new Chartist.Bar("#day-wise-chart", dayData, options, responsiveOptions);
      });
    }
  });
</script>



<!-- days chart start -->

<!-- Bar chart -->
<script>
  // // Get the values from the data attributes
  // var montly_sale = document
  //   .getElementById("sale")
  //   .getAttribute("data-my-variable");
  // var montly_expense = document
  //   .getElementById("expense")
  //   .getAttribute("data-my-variable");

  // // Parse the values as JSON arrays
  // var totalSales = JSON.parse(montly_sale);
  // var totalExpense = JSON.parse(montly_expense);

  (data = {
    labels: [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "Mai",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec",
    ],
    series: [


      [8, 6, 9, 6, 8, 6, 3, 6, 7, 10, 9, 7],
      [7, 5, 4, 5, 7, 3, 4, 5, 4, 6, 8, 5],
    ],
  }),
    (options = { seriesBarDistance: 1 }),
    (responsiveOptions = [
      [
        "screen and (max-width: 640px)",
        {
          seriesBarDistance: 1,
          axisX: {
            labelInterpolationFnc: function (e) {
              return e[0];
            },
          },
        },
      ],
    ]),
    new Chartist.Bar("#overlapping-bars", data, options, responsiveOptions);
</script>


<!-- days chart end -->

<!-- Apex chart -->

<script>
 
  var options1 = {
    chart: { type: "area", height: 80, sparkline: { enabled: !0 } },
    series: [{ data: [7, 5, 4, 5, 7, 3, 4, 5, 4, 6, 8, 5] }],
    stroke: { curve: "smooth", width: 2 },
    colors: ["#525ce5"],
    tooltip: {
      fixed: { enabled: !1 },
      x: { show: !1 },
      y: {
        title: {
          formatter: function (e) {
            return "";
          },
        },
      },
      marker: { show: !1 },
    },
  };
  new ApexCharts(document.querySelector("#stastics-charts"), options1).render();
</script>



{% endblock extra_javascript %}