{% extends 'partials/base.html' %}
{% load static %}

{% block title %}Dashboard{% endblock title %}


{% block extra_css %}
    <!-- plugin css -->
    <link href="{% static 'libs/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'libs/chartist/dist/chartist.min.css' %}" rel="stylesheet">

{% endblock extra_css %}
    
{% block content %}
        <div class="main-content">
            <div class="page-content">
                <!-- start page title -->
                <div class="page-title-box" >
                    <div class="container-fluid">
                        <div class="row align-items-center">
                            <div class="col-sm-6">
                                <div class="page-title">
                                    <h4>Finance Dashboard</h4>
                                    <ol class="breadcrumb m-0">
                                        <li class="breadcrumb-item"><a href="javascript: void(0);">Hall</a></li>
                                        <li class="breadcrumb-item"><a href="javascript: void(0);">Dashboard</a></li>
                                        <li class="breadcrumb-item active">Home</li>
                                    </ol>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <!-- end page title -->
                <div class="container-fluid">
                    <div class="page-content-wrapper">
                        <div class="row">
                            <div class="col-xl-8">
                                <div class="card">
                                    <div class="card-body">
            
                                        <h4 class="header-title">Overlapping bars on mobile</h4>
                                        <p class="card-title-desc">This example makes use of label interpolation and the seriesBarDistance property that allows you to make bars overlap over each other.</p>
            
                                        <div id="overlapping-bars" class="ct-chart ct-golden-section" dir="ltr"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4">
                                <div class="row">
                                    <div class="col-xl-6 col-md-6">
                                        <div class="card">
                                            <div class="card-body">
                                                <div class="text-center">
                                                    <p class="font-size-16">Events This Month</p>
                                                    <div class="mini-stat-icon mx-auto mb-4 mt-3">
                                                        <span class="avatar-title rounded-circle bg-soft-primary">
                                                            <i class="mdi mdi-calendar-month text-primary font-size-20"></i>
                                                        </span>
                                                    </div>
                                                    <h5 class="font-size-22">{{events_this_month}}</h5>
                                                    <p class="text-muted">70% Target</p>
                                                    <div class="progress mt-3" style="height: 4px;">
                                                        <div class="progress-bar progress-bar bg-primary" role="progressbar" style="width: 70%;" aria-valuenow="70" aria-valuemin="0" aria-valuemax="70"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-6 col-md-6">
                                        <div class="card">
                                            <div class="card-body">
                                                <div class="text-center">
                                                    <p class="font-size-16">Events This Year</p>
                                                    <div class="mini-stat-icon mx-auto mb-4 mt-3">
                                                        <span class="avatar-title rounded-circle bg-soft-success">
                                                            <i class="mdi mdi-finance text-success font-size-20"></i>
                                                        </span>
                                                    </div>
                                                    <h5 class="font-size-22">{{events_this_year}}</h5>
                                                    <p class="text-muted">80% Target</p>
                                                    <div class="progress mt-3" style="height: 4px;">
                                                        <div class="progress-bar progress-bar bg-success" role="progressbar" style="width: 80%;" aria-valuenow="80" aria-valuemin="0" aria-valuemax="80"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="header-title mb-4">Expense Stastics</h4>
                                        <div class="media">
                                            <h4>&#8360; 14,235</h4>
                                            <div class="media-body ps-3">
                                                <div class="dropdown">
                                                    <button class="btn btn-light btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                        Today<i class="mdi mdi-chevron-down ms-1"></i>
                                                    </button>
                                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                        <a class="dropdown-item" href="#">Yesterday</a>
                                                        <a class="dropdown-item" href="#">Last Week</a>
                                                        <a class="dropdown-item" href="#">Last Month</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <div id="stastics-chart"></div>
                                        </div>
                                    </div>
                                    
                                </div>
                                
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xl-6">
                                <div class="card">
                                    <div class="card-body">
                                        
                                        <h4 class="header-title">Sales Heads</h4>
                                        <p class="card-title-desc">A very simple pie chart with label interpolation to show percentage instead of the actual data series value.
                                        </p>
                                        <div id="simple-pie" class="ct-chart ct-golden-section simple-pie-chart-chartist" dir="ltr"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- end col -->
                            <div class="col-xl-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="header-title">Expense Heads</h4>
                                        <p class="card-title-desc">Although it'd be also possible to achieve this animation with CSS, with some minor suboptimal things, here's an example of how to animate donut charts using Chartist.Svg.animate and SMIL.</p>
                                        <div id="animating-donut" class="ct-chart ct-golden-section" dir="ltr"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- end col -->
                        </div>

                    </div>
                </div>
                <!-- container-fluid -->
            </div>
        </div>



        <h1 hidden id="received" data-my-variable="{{received}}"></h1>
        <h1 hidden id="remaining" data-my-variable="{{remaining}}"></h1>
            <!-- End Page-content -->
{% endblock content %}

{% block extra_javascript %}

    <!-- <script>
        var received = "{{ received|escapejs }}"; // Use escapejs filter to safely escape the data
        var remaining = "{{ remaining|escapejs }}"; 
    </script> -->

    <!-- apexcharts -->
    <script src="{% static 'libs/apexcharts/dist/apexcharts.min.js' %}"></script>
    <!-- Plugins js-->
    <script src="{% static 'libs/admin-resources/jquery.vectormap/jquery-jvectormap-1.2.2.min.js' %}"></script>
    <script src="{% static 'libs/admin-resources/jquery.vectormap/maps/jquery-jvectormap-world-mill-en.js' %}"></script>
    
    <script src="{% static 'js/pages/dashboard.init.js' %}"></script>
    <script src="{% static 'libs/chart.js/dist/Chart.bundle.min.js' %}"></script>
    <script src="{% static 'js/pages/chartjs.init.js' %}"></script>
    <script src="{% static 'libs/chartist/dist/chartist.min.js' %}"></script>
    <script src="{% static 'libs/chartist-plugin-tooltips-updated/dist/chartist-plugin-tooltip.min.js' %}"></script>
    <!-- demo js-->
    <script src="{% static 'js/pages/chartist.init.js' %}"></script>

    <script>

        // Get the values from the data attributes
        var receivedValue = document.getElementById('received').getAttribute('data-my-variable');
        var remainingValue = document.getElementById('remaining').getAttribute('data-my-variable');

        // Parse the values as JSON arrays
        var receivedArray = JSON.parse(receivedValue);
        var remainingArray = JSON.parse(remainingValue);


        ((data = {

            labels: [
                    "Jan",
                    "Feb",
                    "Mar",
                    "Apr",
                    "Mai",
                    "Jun",
                    "Jul",
                    "Aug",
                    "Sep",
                    "Oct",
                    "Nov",
                    "Dec",
                ],
                series: [
                      receivedArray,
                      remainingArray,
                    //   [8, 6, 9, 6, 8, 6, 3, 6, 7, 10, 9, 7],
                    //   [7, 5, 4, 5, 7, 3, 4, 5, 4, 6, 8, 5],
                ],
            }),
                (options = { seriesBarDistance: 10 }),
                (responsiveOptions = [
                    [
                        "screen and (max-width: 640px)",
                        {
                            seriesBarDistance: 5,
                            axisX: {
                                labelInterpolationFnc: function (e) {
                                    return e[0];
                                },
                            },
                        },
                    ],
                ]),
                new Chartist.Bar("#overlapping-bars", data, options, responsiveOptions))
    </script>

{% endblock extra_javascript %}