{% extends 'partials/base.html' %}
{% load static %}

{% block title %}Kitchen Sale{% endblock title %}

{% block extra_css %}
<!-- DataTables -->
<link href="{% static 'libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css' %}" rel="stylesheet"
  type="text/css" />

<!-- Responsive datatable examples -->
<link href="{% static 'libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css' %}" rel="stylesheet"
  type="text/css" />

<style>
  /* Hide the modal container by default */
  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 1;
  }

  .table-head {
    color: aqua;
  }

  /* Style the modal content */
  .modal-content {
    background-color: #fff;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    z-index: 2;
  }

  /* Style the table */
  table {
    width: 100%;
    border-collapse: collapse;
  }

  table,
  th,
  td {
    border: 1px solid #ccc;
  }

  th,
  td {
    padding: 10px;
    text-align: left;
  }

  /* Label to open the modal */
  .open-modal-link {
    cursor: pointer;
  }

  /* Hide the input checkbox */
  .modal-toggle {
    display: none;
  }

  /* Show the modal when the input checkbox is checked */
  .modal-toggle:checked+.modal {
    display: block;
  }

  ol,
  li {
    float: left;
    margin-left: 50px;
  }
</style>
{% endblock extra_css %}

{% block content %}
<div class="main-content">
  <div class="page-content">
    <!-- start page title -->
    <div class="page-title-box">
      <div class="container-fluid">
        <div class="row align-items-center">
          <div class="col-sm-6">
            <div class="page-title">
              <h4>Sales</h4>
              <ol class="breadcrumb m-0">
                <li class="breadcrumb-item"><a href="javascript: void(0);">Hall</a></li>
                <li class="breadcrumb-item"><a href="javascript: void(0);">Kitchen></a></li>
                <li class="breadcrumb-item active"> <a href="javascript: void(0);">Sales</a></li>
              </ol>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="float-end d-none d-sm-block">
              <a href="" class="btn btn-success" class="btn btn-primary btn-sm waves-effect waves-light"
                data-bs-toggle="modal" data-bs-target="#add-expense-model"><i class="mdi mdi-plus me-2"></i>Add Sale</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end page title -->
    <div class="container-fluid">
      <div class="page-content-wrapper">
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-body">
                <!-- <div>
                                            <a href="javascript:void(0);" class="btn btn-success mb-2" class="btn btn-primary btn-sm waves-effect waves-light" data-bs-toggle="modal" data-bs-target="#add-expense-model"><i class="mdi mdi-plus me-2"></i> Add Expense</a>
                                        </div> -->
                <ul class="nav nav-tabs nav-tabs-custom mb-4">
                  <li class="nav-item">
                    <a class="nav-link fw-bold p-3 active" href="#">All Orders</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link p-3 fw-bold" href="#">Active</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link p-3 fw-bold" href="#">Unpaid</a>
                  </li>
                </ul>
                <div class="table-responsive">
                  <table class="table table-centered datatable dt-responsive nowrap "
                    style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                    <thead class="thead-light">
                      <tr>
                        <th style="width: 20px;">
                          <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="ordercheck" onchange="checkAll(this)"
                              name="chk[]">
                            <label class="form-check-label" for="ordercheck">&nbsp;</label>
                          </div>
                        </th>
                        <th>Bill ID</th>
                        <th>Customer Name</th>
                        <th>Payment Details</th>
                        <th>Date</th>
                        <th style="width: 100px;">See Menu</th>
                        <th>Total Bill</th>
                        <!-- <th>Total Bill</th> -->

                        <!-- <th>Invoice</th> -->
                      </tr>
                    </thead>
                    <tbody>
                      {% for sale in sales %}
                      <tr>
                        <td>
                          <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="ordercheck1">
                            <label class="form-check-label" for="ordercheck1">&nbsp;</label>
                          </div>
                        </td>

                        <td><a href="javascript: void(0);" class="text-dark fw-bold">{{sale.id}}</a> </td>
                        <td>
                          {{sale.customer_name}}
                        </td>

                        {% if not sale.remaining_amount == 0%}
                        <td>
                          <div class="badge badge-soft-warning font-size-12">unpaid</div>
                        </td>
                        {% elif sale.recieved_amount == 0 and sale.remaining_amount != 0 %}
                        <td>
                          <div class="badge badge-soft-danger font-size-12">Remaining</div>
                        </td>
                        {% else %}
                        <td>
                          <div class="badge badge-soft-success font-size-12">Paid</div>
                        </td>
                        {% endif %}

                        <td>
                          {{sale.event_date}}
                        </td>

                        <td id="tooltip-container1">
                          <div class="d-flex">
                            <a href="javascript:void(0);" class="btn-sm waves-effect waves-light" data-bs-toggle="modal"
                              data-bs-target="#menumodal{{ sale.id }}" class="me-3 text-primary"
                              data-bs-container="#tooltip-container1" data-bs-toggle="tooltip" data-bs-placement="top"
                              title="Edit">
                              <i class="mdi mdi-food-fork-drink font-size-18" class="modal-title mt-0"
                                id="add-sale-model"></i>
                            </a>

                            <!-- <a href="#" class="text-danger" data-bs-container="#tooltip-container1" data-bs-toggle="tooltip" data-bs-placement="top" title="Delete">
                                                                <i class="mdi mdi-trash-can font-size-18"></i>
                                                              </a> -->

                          </div>
                        </td>

                        <td>
                          {{sale.total_menu}}

                        </td>

                        <!-- <td>
                                                          {{expense.total_expense}}
                                                        </td> -->
                        <!-- <td>
                                                            <button class="btn btn-light btn-rounded">Invoice <i class="mdi mdi-download ml-2"></i></button>
                                                        </td> -->

                      </tr>
                    </tbody>
                </div>
              </div>
            </div>
          </div>
        </div>


        <div class="modal fade" id="menumodal{{ sale.id }}" tabindex="-1" role="dialog"
          aria-labelledby="add-expense-modelTitle" aria-hidden="true">
          <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title mt-0" id="add-expense-modelTitle">Add Sale</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                </button>
              </div>

              <div class="modal-body">

                <ol>
                  <li>{{ sale.food_menu }}</li>
               
                </ol>


                <div class="modal-footer">
                  <button id="model-btn" type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  <button id="model-btn" type="button" class="btn btn-primary">Save changes</button>
                </div>

              </div>
            </div>

          </div>
        </div>










      </div>
    </div>
  </div>



  {% endfor %}
  </table>


</div>
</div>
</div>


<!-- end row -->
</div>
</div> <!-- container-fluid -->
</div>


<!-- End Page-content -->


{% endblock content %}

{% block extra_javascript %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var selectElement = document.querySelector('select[name="bill"]');
    var pakwanBillInput = document.getElementById("people");

    selectElement.addEventListener('change', function () {
      var selectedOption = selectElement.options[selectElement.selectedIndex];
      var pakwanBill = selectedOption.getAttribute('data-sale-bill');


      if (pakwanBill !== null) {
        pakwanBillInput.value = pakwanBill;
        console.log(pakwanBillInput)

      } else {
        console.log('else')
        pakwanBillInput.value = ''; // Clear the input if no data found
      }
    });
  });





</script>


<!-- Required datatable js -->

<script src="{% static 'libs/datatables.net/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js' %}"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<!-- Responsive examples -->
<script src="{% static 'libs/datatables.net-responsive/js/dataTables.responsive.min.js' %}"></script>
<script src="{% static 'libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js' %}"></script>

<script src="{% static 'js/pages/ecommerce-datatables.init.js' %}"></script>


{% endblock extra_javascript %}